chrome.storage.sync.get(["password"],e=>{e.password?window.location.href="login.html":document.querySelector("#login__button").addEventListener("click",async e=>{e.preventDefault();var e=document.querySelector("#login__email"),o=document.querySelector("#login__password"),t=document.querySelector("#confirm_login__password");o.value==t.value?((t=new jsSHA("SHA-512","TEXT",{encoding:"UTF8"})).update(o.value),o=t.getHash("HEX"),e=e.value,chrome.storage.sync.set({email:e,password:o}),chrome.runtime.sendMessage({installed:!0,email:e},function(e){console.log(e.success)}),await API_REQ({url:"/api/installed",data:{email:e}}),window.location.href="login.html"):new Noty({text:"Password didn't match",type:"error",timeout:2e3,theme:"metroui"}).show()})});