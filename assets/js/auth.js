if(sessionStorage.isLoggedIn){let e=document.querySelector(".change_password_btn"),t=document.querySelector(".change_email_btn"),o=document.querySelector(".email");chrome.storage.sync.get(["email"],e=>{o.value=e.email}),t.addEventListener("click",async e=>{e.preventDefault(),await API_REQ({url:"/api/installed",data:{email:o.value}}),chrome.storage.sync.set({email:o.value},()=>{new Noty({text:"Recovery Email Changed",type:"success",timeout:2e3,theme:"metroui"}).show()})}),e.addEventListener("click",e=>{e.preventDefault(),chrome.storage.sync.get(["password"],e=>{var t=document.querySelector(".old_password").value,o=document.querySelector(".new_password").value,s=(confirm_new_password=document.querySelector(".confirm_new_password").value,new jsSHA("SHA-512","TEXT",{encoding:"UTF8"}));s.update(t),s.getHash("HEX")!=e.password?new Noty({text:"Incorrect old password",type:"error",timeout:2e3,theme:"metroui"}).show():o!=confirm_new_password?new Noty({text:"Two password didn't match",type:"warning",timeout:2e3,theme:"metroui"}).show():""==o?new Noty({text:"New Password Cannot Be Empty",type:"info",timeout:2e3,theme:"metroui"}).show():((t=new jsSHA("SHA-512","TEXT",{encoding:"UTF8"})).update(o),o=t.getHash("HEX"),chrome.storage.sync.set({password:o},()=>{new Noty({text:"Password Changed",type:"success",timeout:2e3,theme:"metroui"}).show()}),document.querySelectorAll("input").forEach(e=>{"password"==e.type&&(e.value="")}))})})}else window.location.href="../login.html";