!function(n){function e(u,n,e){var i,o,f,w,b,s=0,c=[],h=0,l=!1,p=!1,a=[],d=[],g=!1,r=(e=e||{}).encoding||"UTF8",H=e.numRounds||1,v=U(n,r);if(H!==parseInt(H,10)||H<1)throw Error("numRounds must a integer >= 1");if("SHA-1"===u)f=512,w=k,b=J,o=160;else if(w=function(n,e){return q(n,e,u)},b=function(n,e,r,t){var a,o;if("SHA-224"===u||"SHA-256"===u)a=15+(e+65>>>9<<4),o=16;else{if("SHA-384"!==u&&"SHA-512"!==u)throw Error("Unexpected error in SHA-2 implementation");a=31+(e+129>>>10<<5),o=32}for(;n.length<=a;)n.push(0);for(n[e>>>5]|=128<<24-e%32,n[a]=e+r,r=n.length,e=0;e<r;e+=o)t=q(n.slice(e,e+o),t,u);if("SHA-224"===u)n=[t[0],t[1],t[2],t[3],t[4],t[5],t[6]];else if("SHA-256"===u)n=t;else if("SHA-384"===u)n=[t[0].a,t[0].b,t[1].a,t[1].b,t[2].a,t[2].b,t[3].a,t[3].b,t[4].a,t[4].b,t[5].a,t[5].b];else{if("SHA-512"!==u)throw Error("Unexpected error in SHA-2 implementation");n=[t[0].a,t[0].b,t[1].a,t[1].b,t[2].a,t[2].b,t[3].a,t[3].b,t[4].a,t[4].b,t[5].a,t[5].b,t[6].a,t[6].b,t[7].a,t[7].b]}return n},"SHA-224"===u)f=512,o=224;else if("SHA-256"===u)f=512,o=256;else if("SHA-384"===u)f=1024,o=384;else{if("SHA-512"!==u)throw Error("Chosen SHA variant is not supported");f=1024,o=512}i=T(u),this.setHMACKey=function(n,e,r){var t;if(!0===p)throw Error("HMAC key already set");if(!0===l)throw Error("Cannot set HMAC key after finalizing hash");if(!0===g)throw Error("Cannot set HMAC key after calling update");if(n=(e=U(e,(r||{}).encoding||"UTF8")(n)).binLen,e=e.value,r=(t=f>>>3)/4-1,t<n/8){for(e=b(e,n,0,T(u));e.length<=r;)e.push(0);e[r]&=4294967040}else if(n/8<t){for(;e.length<=r;)e.push(0);e[r]&=4294967040}for(n=0;n<=r;n+=1)a[n]=909522486^e[n],d[n]=1549556828^e[n];i=w(a,i),s=f,p=!0},this.update=function(n){var e,r,t=0,a=f>>>5,o=v(n,c,h);for(n=o.binLen,e=o.value,o=n>>>5,r=0;r<o;r+=a)t+f<=n&&(i=w(e.slice(r,r+a),i),t+=f);s+=t,c=e.slice(t>>>5),h=n%f,g=!0},this.getHash=function(n,e){var r,t,a;if(!0===p)throw Error("Cannot call getHash after setting HMAC key");switch(a=m(e),n){case"HEX":r=function(n){return A(n,a)};break;case"B64":r=function(n){return E(n,a)};break;case"BYTES":r=S;break;default:throw Error("format must be HEX, B64, or BYTES")}if(!1===l)for(i=b(c,h,s,i),t=1;t<H;t+=1)i=b(i,o,0,T(u));return l=!0,r(i)},this.getHMAC=function(n,e){var r,t;if(!1===p)throw Error("Cannot call getHMAC without first setting HMAC key");switch(t=m(e),n){case"HEX":r=function(n){return A(n,t)};break;case"B64":r=function(n){return E(n,t)};break;case"BYTES":r=S;break;default:throw Error("outputFormat must be HEX, B64, or BYTES")}return!1===l&&(e=b(c,h,s,i),i=w(d,T(u)),i=b(e,o,f,i)),l=!0,r(i)}}function C(n,e){this.a=n,this.b=e}function r(n,e,r){var t,a,o,u,i,f=n.length;if(e=e||[0],i=(r=r||0)>>>3,0!=f%2)throw Error("String of HEX type must be in byte increments");for(t=0;t<f;t+=2){if(a=parseInt(n.substr(t,2),16),isNaN(a))throw Error("String of HEX type contains invalid characters");for(o=(u=(t>>>1)+i)>>>2;e.length<=o;)e.push(0);e[o]|=a<<8*(3-u%4)}return{value:e,binLen:4*f+r}}function t(n,e,r){for(var t,a,o=[],o=e||[0],u=(r=r||0)>>>3,i=0;i<n.length;i+=1)e=n.charCodeAt(i),o.length<=(t=(a=i+u)>>>2)&&o.push(0),o[t]|=e<<8*(3-a%4);return{value:o,binLen:8*n.length+r}}function a(n,e,r){var t,a,o,u,i,f,w=[],b=0,w=e||[0];if(e=(r=r||0)>>>3,-1===n.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(a=n.indexOf("="),n=n.replace(/\=/g,""),-1!==a&&a<n.length)throw Error("Invalid '=' found in base-64 string");for(a=0;a<n.length;a+=4){for(i=n.substr(a,4),o=u=0;o<i.length;o+=1)u|=(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(i[o]))<<18-6*o;for(o=0;o<i.length-1;o+=1){for(t=(f=b+e)>>>2;w.length<=t;)w.push(0);w[t]|=(u>>>16-8*o&255)<<8*(3-f%4),b+=1}}return{value:w,binLen:8*b+r}}function A(n,e){for(var r,t="",a=4*n.length,o=0;o<a;o+=1)r=n[o>>>2]>>>8*(3-o%4),t+="0123456789abcdef".charAt(r>>>4&15)+"0123456789abcdef".charAt(15&r);return e.outputUpper?t.toUpperCase():t}function E(n,e){for(var r,t,a="",o=4*n.length,u=0;u<o;u+=3)for(r=n.length<=(t=u+1>>>2)?0:n[t],t=n.length<=(t=u+2>>>2)?0:n[t],t=(n[u>>>2]>>>8*(3-u%4)&255)<<16|(r>>>8*(3-(u+1)%4)&255)<<8|t>>>8*(3-(u+2)%4)&255,r=0;r<4;r+=1)8*u+6*r<=32*n.length?a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>>6*(3-r)&63):a+=e.b64Pad;return a}function S(n){for(var e,r="",t=4*n.length,a=0;a<t;a+=1)e=n[a>>>2]>>>8*(3-a%4)&255,r+=String.fromCharCode(e);return r}function m(n){var e={outputUpper:!1,b64Pad:"="};if(e.outputUpper=(n=n||{}).outputUpper||!1,!0===n.hasOwnProperty("b64Pad")&&(e.b64Pad=n.b64Pad),"boolean"!=typeof e.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof e.b64Pad)throw Error("Invalid b64Pad formatting option");return e}function U(n,s){var e;switch(s){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":e=r;break;case"TEXT":e=function(n,e,r){var t,a,o,u,i=[],f=[],w=0,i=e||[0],b=(e=r||0)>>>3;if("UTF8"===s)for(t=0;t<n.length;t+=1)for(f=[],(r=n.charCodeAt(t))<128?f.push(r):r<2048?(f.push(192|r>>>6),f.push(128|63&r)):r<55296||57344<=r?f.push(224|r>>>12,128|r>>>6&63,128|63&r):(r=65536+((1023&r)<<10|1023&n.charCodeAt(t+=1)),f.push(240|r>>>18,128|r>>>12&63,128|r>>>6&63,128|63&r)),a=0;a<f.length;a+=1){for(o=(u=w+b)>>>2;i.length<=o;)i.push(0);i[o]|=f[a]<<8*(3-u%4),w+=1}else if("UTF16BE"===s||"UTF16LE"===s)for(t=0;t<n.length;t+=1){for(r=n.charCodeAt(t),"UTF16LE"===s&&(r=(a=255&r)<<8|r>>>8),o=(u=w+b)>>>2;i.length<=o;)i.push(0);i[o]|=r<<8*(2-u%4),w+=2}return{value:i,binLen:8*w+e}};break;case"B64":e=a;break;case"BYTES":e=t;break;default:throw Error("format must be HEX, TEXT, B64, or BYTES")}return e}function b(n,e){return n<<e|n>>>32-e}function o(n,e){return n>>>e|n<<32-e}function u(n,e){var r=null,r=new C(n.a,n.b);return e<=32?new C(r.a>>>e|r.b<<32-e&4294967295,r.b>>>e|r.a<<32-e&4294967295):new C(r.b>>>e-32|r.a<<64-e&4294967295,r.a>>>e-32|r.b<<64-e&4294967295)}function i(n,e){return e<=32?new C(n.a>>>e,n.b>>>e|n.a<<32-e&4294967295):new C(0,n.a>>>e-32)}function y(n,e,r){return n&e^~n&r}function B(n,e,r){return new C(n.a&e.a^~n.a&r.a,n.b&e.b^~n.b&r.b)}function F(n,e,r){return n&e^n&r^e&r}function x(n,e,r){return new C(n.a&e.a^n.a&r.a^e.a&r.a,n.b&e.b^n.b&r.b^e.b&r.b)}function L(n){return o(n,2)^o(n,13)^o(n,22)}function X(n){var e=u(n,28),r=u(n,34);return n=u(n,39),new C(e.a^r.a^n.a,e.b^r.b^n.b)}function M(n){return o(n,6)^o(n,11)^o(n,25)}function P(n){var e=u(n,14),r=u(n,18);return n=u(n,41),new C(e.a^r.a^n.a,e.b^r.b^n.b)}function I(n){return o(n,7)^o(n,18)^n>>>3}function Y(n){var e=u(n,1),r=u(n,8);return n=i(n,7),new C(e.a^r.a^n.a,e.b^r.b^n.b)}function N(n){return o(n,17)^o(n,19)^n>>>10}function O(n){var e=u(n,19),r=u(n,61);return n=i(n,6),new C(e.a^r.a^n.a,e.b^r.b^n.b)}function z(n,e){var r=(65535&n)+(65535&e);return((n>>>16)+(e>>>16)+(r>>>16)&65535)<<16|65535&r}function R(n,e,r,t){var a=(65535&n)+(65535&e)+(65535&r)+(65535&t);return((n>>>16)+(e>>>16)+(r>>>16)+(t>>>16)+(a>>>16)&65535)<<16|65535&a}function j(n,e,r,t,a){var o=(65535&n)+(65535&e)+(65535&r)+(65535&t)+(65535&a);return((n>>>16)+(e>>>16)+(r>>>16)+(t>>>16)+(a>>>16)+(o>>>16)&65535)<<16|65535&o}function K(n,e){var r=(65535&n.b)+(65535&e.b),t=(n.b>>>16)+(e.b>>>16)+(r>>>16),a=(65535&t)<<16|65535&r;return r=(65535&n.a)+(65535&e.a)+(t>>>16),new C((65535&(n.a>>>16)+(e.a>>>16)+(r>>>16))<<16|65535&r,a)}function Z(n,e,r,t){var a=(65535&n.b)+(65535&e.b)+(65535&r.b)+(65535&t.b),o=(n.b>>>16)+(e.b>>>16)+(r.b>>>16)+(t.b>>>16)+(a>>>16),u=(65535&o)<<16|65535&a;return a=(65535&n.a)+(65535&e.a)+(65535&r.a)+(65535&t.a)+(o>>>16),new C((65535&(n.a>>>16)+(e.a>>>16)+(r.a>>>16)+(t.a>>>16)+(a>>>16))<<16|65535&a,u)}function G(n,e,r,t,a){var o=(65535&n.b)+(65535&e.b)+(65535&r.b)+(65535&t.b)+(65535&a.b),u=(n.b>>>16)+(e.b>>>16)+(r.b>>>16)+(t.b>>>16)+(a.b>>>16)+(o>>>16),i=(65535&u)<<16|65535&o;return o=(65535&n.a)+(65535&e.a)+(65535&r.a)+(65535&t.a)+(65535&a.a)+(u>>>16),new C((65535&(n.a>>>16)+(e.a>>>16)+(r.a>>>16)+(t.a>>>16)+(a.a>>>16)+(o>>>16))<<16|65535&o,i)}function T(n){var e,r;if("SHA-1"===n)n=[1732584193,4023233417,2562383102,271733878,3285377520];else switch(e=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n){case"SHA-224":n=e;break;case"SHA-256":n=r;break;case"SHA-384":n=[new C(3418070365,e[0]),new C(1654270250,e[1]),new C(2438529370,e[2]),new C(355462360,e[3]),new C(1731405415,e[4]),new C(41048885895,e[5]),new C(3675008525,e[6]),new C(1203062813,e[7])];break;case"SHA-512":n=[new C(r[0],4089235720),new C(r[1],2227873595),new C(r[2],4271175723),new C(r[3],1595750129),new C(r[4],2917565137),new C(r[5],725511199),new C(r[6],4215389547),new C(r[7],327033209)];break;default:throw Error("Unknown SHA variant")}return n}function k(n,e){for(var r,t=[],a=e[0],o=e[1],u=e[2],i=e[3],f=e[4],w=0;w<80;w+=1)t[w]=w<16?n[w]:b(t[w-3]^t[w-8]^t[w-14]^t[w-16],1),r=w<20?j(b(a,5),o&u^~o&i,f,1518500249,t[w]):w<40?j(b(a,5),o^u^i,f,1859775393,t[w]):w<60?j(b(a,5),F(o,u,i),f,2400959708,t[w]):j(b(a,5),o^u^i,f,3395469782,t[w]),f=i,i=u,u=b(o,30),o=a,a=r;return e[0]=z(a,e[0]),e[1]=z(o,e[1]),e[2]=z(u,e[2]),e[3]=z(i,e[3]),e[4]=z(f,e[4]),e}function J(n,e,r,t){for(var a=15+(e+65>>>9<<4);n.length<=a;)n.push(0);for(n[e>>>5]|=128<<24-e%32,n[a]=e+r,r=n.length,e=0;e<r;e+=16)t=k(n.slice(e,e+16),t);return t}function q(n,e,r){var t,a,o,u,i,f,w,b,s,c,h,l,p,d,g,H,v,A,E,S,m,U,T,k=[];if("SHA-224"===r||"SHA-256"===r)c=64,l=1,U=Number,p=z,d=R,g=j,H=I,v=N,A=L,E=M,m=F,S=y,T=D;else{if("SHA-384"!==r&&"SHA-512"!==r)throw Error("Unexpected error in SHA-2 implementation");c=80,l=2,U=C,p=K,d=Z,g=G,H=Y,v=O,A=X,E=P,m=x,S=B,T=Q}for(r=e[0],t=e[1],a=e[2],o=e[3],u=e[4],i=e[5],f=e[6],w=e[7],h=0;h<c;h+=1)h<16?(b=n.length<=(s=h*l)?0:n[s],s=n.length<=s+1?0:n[s+1],k[h]=new U(b,s)):k[h]=d(v(k[h-2]),k[h-7],H(k[h-15]),k[h-16]),b=g(w,E(u),S(u,i,f),T[h],k[h]),s=p(A(r),m(r,t,a)),w=f,f=i,i=u,u=p(o,b),o=a,a=t,t=r,r=p(b,s);return e[0]=p(r,e[0]),e[1]=p(t,e[1]),e[2]=p(a,e[2]),e[3]=p(o,e[3]),e[4]=p(u,e[4]),e[5]=p(i,e[5]),e[6]=p(f,e[6]),e[7]=p(w,e[7]),e}var D=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Q=[new C(D[0],3609767458),new C(D[1],602891725),new C(D[2],3964484399),new C(D[3],2173295548),new C(D[4],4081628472),new C(D[5],3053834265),new C(D[6],2937671579),new C(D[7],3664609560),new C(D[8],2734883394),new C(D[9],1164996542),new C(D[10],1323610764),new C(D[11],3590304994),new C(D[12],4068182383),new C(D[13],991336113),new C(D[14],633803317),new C(D[15],3479774868),new C(D[16],2666613458),new C(D[17],944711139),new C(D[18],2341262773),new C(D[19],2007800933),new C(D[20],1495990901),new C(D[21],1856431235),new C(D[22],3175218132),new C(D[23],2198950837),new C(D[24],3999719339),new C(D[25],766784016),new C(D[26],2566594879),new C(D[27],3203337956),new C(D[28],1034457026),new C(D[29],2466948901),new C(D[30],3758326383),new C(D[31],168717936),new C(D[32],1188179964),new C(D[33],1546045734),new C(D[34],1522805485),new C(D[35],2643833823),new C(D[36],2343527390),new C(D[37],1014477480),new C(D[38],1206759142),new C(D[39],344077627),new C(D[40],1290863460),new C(D[41],3158454273),new C(D[42],3505952657),new C(D[43],106217008),new C(D[44],3606008344),new C(D[45],1432725776),new C(D[46],1467031594),new C(D[47],851169720),new C(D[48],3100823752),new C(D[49],1363258195),new C(D[50],3750685593),new C(D[51],3785050280),new C(D[52],3318307427),new C(D[53],3812723403),new C(D[54],2003034995),new C(D[55],3602036899),new C(D[56],1575990012),new C(D[57],1125592928),new C(D[58],2716904306),new C(D[59],442776044),new C(D[60],593698344),new C(D[61],3733110249),new C(D[62],2999351573),new C(D[63],3815920427),new C(3391569614,3928383900),new C(3515267271,566280711),new C(3940187606,3454069534),new C(4118630271,4000239992),new C(116418474,1914138554),new C(174292421,2731055270),new C(289380356,3203993006),new C(460393269,320620315),new C(685471733,587496836),new C(852142971,1086792851),new C(1017036298,365543100),new C(1126000580,2618297676),new C(1288033470,3409855158),new C(1501505948,4234509866),new C(1607167915,987167468),new C(1816402316,1246189591)];"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=e:exports=e:n.jsSHA=e}(this);